var se=Object.defineProperty,ae=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var P=Object.getOwnPropertySymbols;var le=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var W=(n,e,t)=>e in n?se(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,X=(n,e)=>{for(var t in e||(e={}))le.call(e,t)&&W(n,t,e[t]);if(P)for(var t of P(e))ie.call(e,t)&&W(n,t,e[t]);return n},Z=(n,e)=>ae(n,ne(e));import{S as x,i as $,s as ee,e as m,t as T,k as N,c as p,a as y,h as H,d as f,m as w,b as E,g as L,L as d,W as z,j as F,E as J,X as oe,Z as re,w as ce,x as de,y as ue,q as C,o as S,B as fe,Y as he,p as _e,_ as ve,n as me}from"../../chunks/index-91d33c8b.js";import{t as pe,n as ye,a as be,b as ge,c as Ee,I as De,d as Ie}from"../../chunks/firebase-c7a26db2.js";import{g as Ve}from"../../chunks/navigation-0e6511d1.js";import"../../chunks/singletons-d1fb5791.js";function Ne(n){let e,t,s,i,r,h,u,D,v,a,B,c,l,_,o,g,k,V,q;return{c(){e=m("div"),t=m("div"),s=m("h2"),i=T(n[0]),r=N(),h=m("div"),u=m("p"),D=T(n[1]),v=N(),a=m("div"),B=N(),c=m("div"),l=m("button"),_=T("View and edit"),o=N(),g=m("button"),k=T("Delete"),this.h()},l(I){e=p(I,"DIV",{class:!0});var b=y(e);t=p(b,"DIV",{class:!0});var U=y(t);s=p(U,"H2",{});var Y=y(s);i=H(Y,n[0]),Y.forEach(f),U.forEach(f),r=w(b),h=p(b,"DIV",{class:!0});var j=y(h);u=p(j,"P",{});var A=y(u);D=H(A,n[1]),A.forEach(f),j.forEach(f),v=w(b),a=p(b,"DIV",{class:!0});var te=y(a);te.forEach(f),B=w(b),c=p(b,"DIV",{class:!0});var M=y(c);l=p(M,"BUTTON",{class:!0});var O=y(l);_=H(O,"View and edit"),O.forEach(f),o=w(M),g=p(M,"BUTTON",{class:!0});var G=y(g);k=H(G,"Delete"),G.forEach(f),M.forEach(f),b.forEach(f),this.h()},h(){E(t,"class","title"),E(h,"class","content svelte-eyb2dr"),E(a,"class","description svelte-eyb2dr"),E(l,"class","edit svelte-eyb2dr"),E(g,"class","delete svelte-eyb2dr"),E(c,"class","button-set svelte-eyb2dr"),E(e,"class","card svelte-eyb2dr")},m(I,b){L(I,e,b),d(e,t),d(t,s),d(s,i),d(e,r),d(e,h),d(h,u),d(u,D),d(e,v),d(e,a),a.innerHTML=n[2],d(e,B),d(e,c),d(c,l),d(l,_),d(c,o),d(c,g),d(g,k),V||(q=[z(l,"click",n[4]),z(g,"click",n[3])],V=!0)},p(I,[b]){b&1&&F(i,I[0]),b&2&&F(D,I[1]),b&4&&(a.innerHTML=I[2])},i:J,o:J,d(I){I&&f(e),V=!1,oe(q)}}}function we(n,e,t){let{title:s,summary:i,id:r,description:h}=e;const u=re();function D(){u("deleteNote",{id:r})}async function v(){await Ve(`/admin/notes/update/${r}`)}return n.$$set=a=>{"title"in a&&t(0,s=a.title),"summary"in a&&t(1,i=a.summary),"id"in a&&t(5,r=a.id),"description"in a&&t(2,h=a.description)},[s,i,h,D,v,r]}class ke extends x{constructor(e){super();$(this,e,we,Ne,ee,{title:0,summary:1,id:5,description:2})}}function K(n,e,t){const s=n.slice();return s[1]=e[t],s}function Q(n){let e,t,s,i;return{c(){e=m("div"),t=m("h2"),s=T("You don't have any notes yet."),i=N(),this.h()},l(r){e=p(r,"DIV",{class:!0});var h=y(e);t=p(h,"H2",{});var u=y(t);s=H(u,"You don't have any notes yet."),u.forEach(f),i=w(h),h.forEach(f),this.h()},h(){E(e,"class","center")},m(r,h){L(r,e,h),d(e,t),d(t,s),d(e,i)},d(r){r&&f(e)}}}function R(n){let e,t;return e=new ke({props:{title:n[1].title,summary:n[1].summary,id:n[1].id,description:n[1].description}}),e.$on("deleteNote",Te),{c(){ce(e.$$.fragment)},l(s){de(e.$$.fragment,s)},m(s,i){ue(e,s,i),t=!0},p(s,i){const r={};i&1&&(r.title=s[1].title),i&1&&(r.summary=s[1].summary),i&1&&(r.id=s[1].id),i&1&&(r.description=s[1].description),e.$set(r)},i(s){t||(C(e.$$.fragment,s),t=!0)},o(s){S(e.$$.fragment,s),t=!1},d(s){fe(e,s)}}}function qe(n){let e,t,s,i,r,h,u,D,v=n[0],a=[];for(let l=0;l<v.length;l+=1)a[l]=R(K(n,v,l));const B=l=>S(a[l],1,1,()=>{a[l]=null});let c=null;return v.length||(c=Q()),{c(){e=N(),t=m("div"),s=m("div"),i=m("h2"),r=T("My Notes"),h=N(),u=m("div");for(let l=0;l<a.length;l+=1)a[l].c();c&&c.c(),this.h()},l(l){he('[data-svelte="svelte-1nf8jqu"]',document.head).forEach(f),e=w(l),t=p(l,"DIV",{class:!0});var o=y(t);s=p(o,"DIV",{class:!0});var g=y(s);i=p(g,"H2",{class:!0});var k=y(i);r=H(k,"My Notes"),k.forEach(f),g.forEach(f),h=w(o),u=p(o,"DIV",{class:!0});var V=y(u);for(let q=0;q<a.length;q+=1)a[q].l(V);c&&c.l(V),V.forEach(f),o.forEach(f),this.h()},h(){document.title="At a Glance",E(i,"class","svelte-oymfbh"),E(s,"class","header svelte-oymfbh"),E(u,"class","notes svelte-oymfbh"),E(t,"class","content svelte-oymfbh")},m(l,_){L(l,e,_),L(l,t,_),d(t,s),d(s,i),d(i,r),d(t,h),d(t,u);for(let o=0;o<a.length;o+=1)a[o].m(u,null);c&&c.m(u,null),D=!0},p(l,[_]){if(_&1){v=l[0];let o;for(o=0;o<v.length;o+=1){const g=K(l,v,o);a[o]?(a[o].p(g,_),C(a[o],1)):(a[o]=R(g),a[o].c(),C(a[o],1),a[o].m(u,null))}for(me(),o=v.length;o<a.length;o+=1)B(o);_e(),v.length?c&&(c.d(1),c=null):c||(c=Q(),c.c(),c.m(u,null))}},i(l){if(!D){for(let _=0;_<v.length;_+=1)C(a[_]);D=!0}},o(l){a=a.filter(Boolean);for(let _=0;_<a.length;_+=1)S(a[_]);D=!1},d(l){l&&f(e),l&&f(t),ve(a,l),c&&c.d()}}}async function Ue({session:n}){let{user:e}=n;if(e==null)return{status:302,redirect:"/"};const t=pe(ge,ye("owner","==",be.currentUser.uid)),s=await Ee(t);let i=[];return s.forEach(r=>{i.push(Z(X({},r.data()),{id:r.id}))}),{status:200,props:{notes:i}}}async function Te(n){await De(Ie(n.detail.id))}function He(n,e,t){let{notes:s}=e;return n.$$set=i=>{"notes"in i&&t(0,s=i.notes)},[s]}class Ye extends x{constructor(e){super();$(this,e,He,qe,ee,{notes:0})}}export{Ye as default,Ue as load};
